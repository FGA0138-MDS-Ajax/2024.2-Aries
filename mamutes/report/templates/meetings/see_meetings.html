{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/meetings.css' %}">
<link rel="stylesheet" href="{% static 'css/newMeeting.css' %}">
<link rel="stylesheet" href="{% static 'css/editMeeting.css' %}">
<link rel="stylesheet" href="{% static 'css/filterMeeting.css' %}">
    <!-- visualizar reuniao modal -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelector(".thrashBtn").addEventListener("click", function () {
                // Obtém o ID da reunião a partir do span dentro da div atual
                let meetingId = document.querySelector("#modalId").textContent.trim();
        
                if (!meetingId) {
                    alert("Erro: ID da reunião não encontrado.");
                    return;
                }
        
                if (confirm("Tem certeza que deseja excluir esta reunião?")) {
                    fetch(`/delete_meeting/${meetingId}/`, {
                        method: "POST",
                        headers: {
                            "X-CSRFToken": getCSRFToken(),
                            "Content-Type": "application/json",
                        },
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert("Reunião excluída com sucesso!");
                            location.reload();
                        } else {
                            alert("Erro ao excluir reunião.");
                        }
                    })
                    .catch(error => console.error("Erro na requisição:", error));
                }
            });
        
            function getCSRFToken() {
                return document.querySelector("[name=csrfmiddlewaretoken]").value;
            }
        });
        
    </script>
{% endblock %}
    <div id="modalcard" class="modalcard">
        <div class="modal-content-card">
            
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 8px; width: 100%;">
                <div style="display: flex; justify-content: flex-start; gap: 8px;">
                    <div class="editBtn" id="openModalEditBtn">
                        <svg class="editImg" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M8.58042 1.83929H2.68454C2.23777 1.83929 1.8093 2.01677 1.49339 2.33268C1.17748 2.6486 1 3.07706 1 3.52383V15.3156C1 15.7624 1.17748 16.1908 1.49339 16.5067C1.8093 16.8226 2.23777 17.0001 2.68454 17.0001H14.4763C14.9231 17.0001 15.3515 16.8226 15.6674 16.5067C15.9834 16.1908 16.1608 15.7624 16.1608 15.3156V9.41971" stroke="#0075F6" stroke-width="1.68454" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.9499 1.52344C14.285 1.18837 14.7394 1.00012 15.2133 1.00012C15.6872 1.00012 16.1416 1.18837 16.4767 1.52344C16.8118 1.85852 17 2.31298 17 2.78684C17 3.26071 16.8118 3.71517 16.4767 4.05025L8.88535 11.6425C8.68535 11.8423 8.43828 11.9886 8.1669 12.0678L5.74706 12.7753C5.67458 12.7964 5.59776 12.7977 5.52462 12.779C5.45149 12.7602 5.38474 12.7222 5.33136 12.6688C5.27797 12.6154 5.23992 12.5487 5.22118 12.4755C5.20245 12.4024 5.20371 12.3256 5.22485 12.2531L5.93236 9.83326C6.01198 9.56209 6.15854 9.31531 6.35855 9.11565L13.9499 1.52344Z" stroke="#0075F6" stroke-width="1.68454" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Editar reunião</span>
                    </div>
                    <span class="others" id="modalId" style='display: none'></span>
                    <div class="thrashBtn"  data-meeting-id="{{ meeting.id }}">
                        <svg class="thrashImg" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <path d="M12.3333 2.66667H9.66667V2C9.66667 1.46957 9.45595 0.960859 9.08088 0.585786C8.70581 0.210714 8.1971 0 7.66667 0H6.33333C5.8029 0 5.29419 0.210714 4.91912 0.585786C4.54405 0.960859 4.33333 1.46957 4.33333 2V2.66667H1.66667C1.48986 2.66667 1.32029 2.7369 1.19526 2.86193C1.07024 2.98695 1 3.15652 1 3.33333C1 3.51014 1.07024 3.67971 1.19526 3.80474C1.32029 3.92976 1.48986 4 1.66667 4H2.33333V11.3333C2.33333 11.8638 2.54405 12.3725 2.91912 12.7475C3.29419 13.1226 3.8029 13.3333 4.33333 13.3333H9.66667C10.1971 13.3333 10.7058 13.1226 11.0809 12.7475C11.456 12.3725 11.6667 11.8638 11.6667 11.3333V4H12.3333C12.5101 4 12.6797 3.92976 12.8047 3.80474C12.9298 3.67971 13 3.51014 13 3.33333C13 3.15652 12.9298 2.98695 12.8047 2.86193C12.6797 2.7369 12.5101 2.66667 12.3333 2.66667ZM5.66667 2C5.66667 1.82319 5.7369 1.65362 5.86193 1.5286C5.98695 1.40357 6.15652 1.33333 6.33333 1.33333H7.66667C7.84348 1.33333 8.01305 1.40357 8.13807 1.5286C8.2631 1.65362 8.33333 1.82319 8.33333 2V2.66667H5.66667V2ZM10.3333 11.3333C10.3333 11.5101 10.2631 11.6797 10.1381 11.8047C10.013 11.9298 9.84348 12 9.66667 12H4.33333C4.15652 12 3.98695 11.9298 3.86193 11.8047C3.7369 11.6797 3.66667 11.5101 3.66667 11.3333V4H10.3333V11.3333Z" fill="#D70000"/>
                        </svg>
                    </div>
                </div>
                <div>
                    <span class="close-btn" id="closeModalSeeBtn">&times;</span>
                </div>
            </div><br>
            
        <div class="modal-form">
                <h2 class="head-label-edit" id="modalTitle"></h2>
                <form method="POST" class="form">
                {% csrf_token %}
                
                    <div class="description-task">
                        <div style="display: flex; justify-content: flex-end; gap: 4px; margin-top: -10x;">
                            <span class="others" id="modalDescription"><b>Objetivo:</b>a</span>
                </div>
                    </div>

                    <div class="status-data" style="display: flex; flex-direction: row; width: 100%;">
                        <div class="description-task">
                            <label class="titles" id="modalDate"></label>
                            <div class="rows-sections">
                                <svg class="images" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                    <path d="M1.16699 5.16665H12.8337M3.90766 2.16665V0.833313M10.0743 2.16665V0.833313M10.5003 2.16665H3.50033C2.88149 2.16665 2.28799 2.41248 1.85041 2.85006C1.41282 3.28765 1.16699 3.88114 1.16699 4.49998V10.8333C1.16699 11.4522 1.41282 12.0456 1.85041 12.4832C2.28799 12.9208 2.88149 13.1666 3.50033 13.1666H10.5003C11.1192 13.1666 11.7127 12.9208 12.1502 12.4832C12.5878 12.0456 12.8337 11.4522 12.8337 10.8333V4.49998C12.8337 3.88114 12.5878 3.28765 12.1502 2.85006C11.7127 2.41248 11.1192 2.16665 10.5003 2.16665Z" stroke="#1F1A99" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span class="data" id="modalDate"></span>
                            </div>
                        </div>

                        <div class="description-task">
                            <label class="titles">Início</label>
                            <div class="rows-sections">
                                <svg class="images" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                    <path d="M9.13301 9.4L7.68461 7.9516C7.45955 7.72661 7.33308 7.42143 7.33301 7.1032V3.4M13.333 7C13.333 10.3137 10.6467 13 7.33301 13C4.0193 13 1.33301 10.3137 1.33301 7C1.33301 3.68629 4.0193 1 7.33301 1C10.6467 1 13.333 3.68629 13.333 7Z" stroke="#1F1A99" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span class="data" id="modalTimeBegin"></span>
                            </div>
                        </div>

                        <div class="description-task">
                            <label class="titles">Término</label>
                            <div class="rows-sections">
                                <svg class="images" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                    <path d="M8.46699 9.4L7.01859 7.9516C6.79353 7.72661 6.66706 7.42143 6.66699 7.1032V3.4M12.667 7C12.667 10.3137 9.9807 13 6.66699 13C3.35328 13 0.666992 10.3137 0.666992 7C0.666992 3.68629 3.35328 1 6.66699 1C9.9807 1 12.667 3.68629 12.667 7Z" stroke="#1F1A99" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span class="data" id="modalTimeEnd"></span>
                            </div>
                        </div>

                        <div class="description-task">
                            <label class="titles">Local:<p id="modalLocal"></p></label>
                            <div class="rows-sections">
                                <svg class="images" xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16" fill="none">
                                    <path d="M3 14.6666V4.99996C3 4.64634 3.14048 4.3072 3.39052 4.05715C3.64057 3.8071 3.97971 3.66663 4.33333 3.66663C4.68696 3.66663 5.02609 3.8071 5.27614 4.05715C5.52619 4.3072 5.66667 4.64634 5.66667 4.99996V11.6666L13.3333 13.3333V14.6666" stroke="#1F1A99" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M3.00033 8.41665C1.63466 7.88331 0.666992 6.55465 0.666992 4.99998C0.666992 2.97498 2.30866 1.33331 4.33366 1.33331C6.35866 1.33331 8.00033 2.97498 8.00033 4.99998C8.00033 6.55465 7.03266 7.88331 5.66699 8.41665" stroke="#1F1A99" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                <span class="data" id="modalisremote">Reunião online</span>
                            </div>
                        </div>
                    </div>  
                   
                    <div class="description-task">
                        <label class="title-form">Áreas:</label>
                        <div class="teamsMeeting">
                        <div id="uniqueModalAreas" class="meeting-areas-modal"></div>
                        </div>
                      </div>
                     
                      <div class="description-task">
                        <label class="title-form">Membros da Área:</label>
                        <div class="personMeeting">
                            <div id="uniqueModalPerson" class="meeting-areas-modal"></div>
                        </div>
                      </div>

                    <div class="description-task">
                        <label class="title-form">Outros presentes</label>
                        <span class="others" id="modalother_participants"></span>
                    </div>

                    <div class="description-task">
                        <label class="title-form">Pauta e registros da reunião</label>
                        <span class="pauta" id="modallink_pauta">
                        </span>
                    </div>

                    <div class="description-task">
                        <label class="title-form">Link</label>
                        <div class="Titulo-input-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 12 6" fill="none">
                                <path d="M3 6C2.17 6 1.4626 5.7074 0.8778 5.1222C0.293 4.537 0.00040041 3.8296 4.09556e-07 3C-0.00039959 2.1704 0.2922 1.463 0.8778 0.8778C1.4634 0.2926 2.1708 0 3 0H4.8C4.97 0 5.1126 0.0576001 5.2278 0.1728C5.343 0.288 5.4004 0.4304 5.4 0.6C5.3996 0.7696 5.342 0.9122 5.2272 1.0278C5.1124 1.1434 4.97 1.2008 4.8 1.2H3C2.5 1.2 2.075 1.375 1.725 1.725C1.375 2.075 1.2 2.5 1.2 3C1.2 3.5 1.375 3.925 1.725 4.275C2.075 4.625 2.5 4.8 3 4.8H4.8C4.97 4.8 5.1126 4.8576 5.2278 4.9728C5.343 5.088 5.4004 5.2304 5.4 5.4C5.3996 5.5696 5.342 5.7122 5.2272 5.8278C5.1124 5.9434 4.97 6.0008 4.8 6H3ZM4.2 3.6C4.03 3.6 3.8876 3.5424 3.7728 3.4272C3.658 3.312 3.6004 3.1696 3.6 3C3.5996 2.8304 3.6572 2.688 3.7728 2.5728C3.8884 2.4576 4.0308 2.4 4.2 2.4H7.8C7.97 2.4 8.1126 2.4576 8.2278 2.5728C8.343 2.688 8.4004 2.8304 8.4 3C8.3996 3.1696 8.342 3.3122 8.2272 3.4278C8.1124 3.5434 7.97 3.6008 7.8 3.6H4.2ZM7.2 6C7.03 6 6.8876 5.9424 6.7728 5.8272C6.658 5.712 6.6004 5.5696 6.6 5.4C6.5996 5.2304 6.6572 5.088 6.7728 4.9728C6.8884 4.8576 7.0308 4.8 7.2 4.8H9C9.5 4.8 9.925 4.625 10.275 4.275C10.625 3.925 10.8 3.5 10.8 3C10.8 2.5 10.625 2.075 10.275 1.725C9.925 1.375 9.5 1.2 9 1.2H7.2C7.03 1.2 6.8876 1.1424 6.7728 1.0272C6.658 0.912 6.6004 0.7696 6.6 0.6C6.5996 0.4304 6.6572 0.288 6.7728 0.1728C6.8884 0.0576001 7.0308 0 7.2 0H9C9.83 0 10.5376 0.2926 11.1228 0.8778C11.708 1.463 12.0004 2.1704 12 3C11.9996 3.8296 11.707 4.5372 11.1222 5.1228C10.5374 5.7084 9.83 6.0008 9 6H7.2Z" fill="#0075F6"/>
                            </svg>
                            <a href="" target="_blank" id="modallink" class="link" title="Abrir link"></a>
                        </div>
                </div>
                    
                </form>
            </div>
        </div>
    </div>

{% include 'meetings/edit_meetings.html'%}